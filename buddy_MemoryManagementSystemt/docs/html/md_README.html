<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>mydash: README</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">mydash
   &#160;<span id="projectnumber">Version1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">README </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>#Project 5 {#mainpage}</p>
<ul>
<li>Author: Badr Al-aseeri</li>
<li>Class: CS453/552 [Operating Systems] Section 2</li>
<li>Date: 12/9/16 <h2>Overview</h2>
</li>
</ul>
<p>This program replaces malloc with your own memory management scheme based on the Buddy system.</p>
<h2>Manifest</h2>
<p><a class="el" href="README_8md.html">README.md</a> - this file Makefile - top level Makefile <a class="el" href="ourhdr_8h.html">ourhdr.h</a> - own header doxygen-config doxygen.log</p>
<p>/buddy-src - directory with all buddy related files -Makefile - Makefile for buddy files -buddy.c - implementation of buddy system memory management -buddy.h - header for buddy memory manager -buddy-test.c - provided buddy memory manager test -buddy-unit-test.c - provided buddy memory manager unit test -malloc-test.c - provided malloc test</p>
<p>/mydash-src - directory with all dash related files -Makefile - Makefile for dash files that links to linked list -jobs.c - files for job handeling -jobs.h - header for job handeling -mydash.c - implementaion of my own dash -mydash.h - header for dash implementation</p>
<p>/other-progs -Makefile -loop.c - file that runs loop -test-readline.c - readline tester for dash</p>
<h2>Building the project</h2>
<p>To compile: from p5 folder, type "make"</p>
<p>To run mydash with implementation of buddy memory manager: </p><pre class="fragment">       LD_LIBRARY_PATH=$(pwd) LD_PRELOAD=libbuddy.so ./mydash 
</pre><p>To run any program with implementation of buddy memory manager: </p><pre class="fragment">       LD_LIBRARY_PATH=. LD_PRELOAD=libbuddy.so &lt;program name&gt;
</pre><h2>Program design</h2>
<p>This program uses a struct that represents a block of memory to keep track of the k value, if the block is being used, and pointers to the next and previous. It uses the buddy memory management system to implement malloc, calloc, realloc and free. It then uses wrapper functions to overide the C stdlib calls to malloc, calloc, realloc and free to run them instead of the C stdlib calls.</p>
<p>I used the Knuth slides that were posted on Piazza as well as a lot of research I found online on how the buddy memory manager works. I definitely had to do my research for this project.</p>
<h2>Testing</h2>
<p>To test this program I first used the provided tests to make sure that the program was initiallyworking correctly and I was on the right track.</p>
<p>I also tested the buddy memory manager by trying to run as many programs using the buddy memory calls instead of the C stdlib calls. This is where problems were exposed in my realloc that I had to go back and fix. I spent a lot of time here but adding print statements in my realloc helped me pinpoint where my issues were coming from.</p>
<h3>Valgrind</h3>
<p>I say this with a heavy heart, but Valgrind does not apply to this program :(</p>
<h2>Discussion</h2>
<p>While working on this project I realized how much I dislike pointer arithmatic. It took a lot of trial and error with pointer arithmatic to get things working. Since debugging was tough with this project, I had to make sure my pointer arithmatic was working correctly. So this project definitely helped me brush up on pointer arithmatic.</p>
<p>For some reason my program was looping infinitely in buddy_init. I could not figure out what on earth was going on and then it just started working one day out of no where. I honestly don't think I changed anything to make it work but it's driving me crazy that I can't figure out what happened.</p>
<p>Overall, This project really helped me understand memory and how it works. It helped me understand what happens when I call malloc and free in my code. It painted a solid image in my head of what happens behind the scenes which I think will come in handy when programming in the future. It will definitely help me fix bugs and memory leaks when I face them in the future. If that was the intent of this project, then good job!</p>
<h2>Sources used</h2>
<p>cs453 examples repository. Knuth slides on Piazza.</p>
<h2>Extra credit</h2>
<p>1) I made my buddy memory manager multi threaded</p>
<p>2) performance of buddy-test VS malloc-test:</p>
<p>------------------------&mdash;FIRST ATTEMPT---------------------&mdash; [balaseer buddy-src]$ time ./buddy-test 200000 123 silent real 0m0.040s user 0m0.037s sys 0m0.003s [balaseer buddy-src]$ time ./malloc-test 200000 123 silent</p>
<p>real 0m0.051s user 0m0.050s </p><h2>sys 0m0.001s </h2>
<p>------------------------&mdash;SECOND ATTEMPT----------------------&mdash; [balaseer buddy-src]$ time ./buddy-test 200000 123 silent</p>
<p>real 0m0.037s user 0m0.035s sys 0m0.002s [balaseer buddy-src]$ time ./malloc-test 200000 123 silent</p>
<p>real 0m0.049s user 0m0.047s </p><h2>sys 0m0.002s </h2>
<p>------------------------&mdash;THIRD ATTEMPT------------------------&mdash; [balaseer buddy-src]$ time ./buddy-test 200000 123 silent</p>
<p>real 0m0.038s user 0m0.037s sys 0m0.002s [balaseer buddy-src]$ time ./malloc-test 200000 123 silent</p>
<p>real 0m0.041s user 0m0.040s </p><h2>sys 0m0.001s </h2>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Dec 17 2016 19:09:00 for mydash by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
